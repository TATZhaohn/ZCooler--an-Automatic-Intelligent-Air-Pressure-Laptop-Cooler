# ZCooler--an-Automatic-Intelligent-Air-Pressure-Laptop-Cooler
能够自动运行的智能笔记本风压式散热器，基于esp32设计，可通过蓝牙与电脑通信并进行自动开关和参数调节。

本开源为电脑程序、单片机程序部分

PCB设计请移步至嘉立创开源平台：https://oshwhub.com/tatzhao/bi-ji-ben-san-re-qi-2-0

机械建模设计请移步至Bamboo Lab：待更新

---

效果展示：

https://www.bilibili.com/video/BV1M9aZz5Eke/

---

window程序：

-

功能特性


🔧 核心功能

实时硬件监控 - 监控CPU/GPU温度和功耗

智能风扇控制 - 支持自动、手动和自定义曲线控制

蓝牙连接 - 通过串口蓝牙与散热设备通信

RGB灯光控制 - 多种灯光模式和自定义颜色

自动连接机制 - 设备自动连接

🎛️ 控制模式

自动模式 - 根据温度自动调整风扇转速

手动模式 - 用户自定义固定转速

曲线模式 - 自定义温度-转速曲线

灯光模式 - 彩虹、单色、呼吸等多种效果

💾 系统集成

开机自启动选项

系统托盘最小化

内存优化管理

配置自动保存

-

系统要求

操作系统: Windows 10/11（目前仅在本人的笔记本上测试通过（WIN11）

.NET框架: .NET Framework 4.8

硬件: 支持蓝牙连接的智能散热设备

-

安装与使用

下载安装：从Releases页面下载

解压并启动ZCooler应用程序

连接散热器时请确保散热器设备已通电并处于可配对状态

进入电脑蓝牙界面配对设备

进入ZCooler程序

点击"刷新端口"按钮扫描可用蓝牙设备

选择正确的COM端口并点击"连接"

根据需要调整风扇和灯光设置

点击"保存"应用设置到设备

-

开发指南

vs项目从Releases页面下载

项目结构

text

ZCooler/

├── Models/          # 数据模型

├── Services/        # 服务层（硬件监控、配置、蓝牙等）

├── Views/           # 用户界面

├── App.xaml         # 应用程序入口

└── MainWindow.xaml  # 主窗口

-

使用Visual Studio 2019或更高版本打开解决方案

还原NuGet包

构建并运行项目

-依赖项
Hardcodet.Wpf.TaskbarNotification - 系统托盘支持

.NET Framework 4.8 - 运行时框架

-配置说明
应用程序设置保存在 config.json 文件中，包含:

连接设置（端口、自动连接）

风扇曲线配置

灯光设置

应用程序偏好

---

ESP程序：

-

可从Releases页面下载

-

功能特性

🔌 硬件控制

PWM风扇控制 - 精确控制风扇转速

RGB灯光控制 - 支持多种灯光效果

编码器输入 - 旋钮调节风扇速度

物理按钮 - 模式切换和开关控制

🌈 灯光模式

RGB循环 - 彩虹色循环效果

RGB流水灯 - 流动彩虹效果

温度颜色 - 根据温度显示不同颜色

单色常亮 - 固定颜色显示

灯光关闭 - 完全关闭灯光

🔄 通信协议

蓝牙串口通信 - 与PC端软件双向通信

数据包解析 - 支持TATZ(温度)和0921(设置)协议

状态反馈 - 实时发送设备状态到PC端

-

硬件要求

-

主要组件

主控芯片: ESP32 (支持蓝牙)

风扇: PWM风扇（12V）

灯光: WS2812 RGB灯带

输入设备:

旋转编码器

3个物理按钮（风扇模式、总开关、灯光模式）

-

引脚定义

cpp

#define ENCODER_CLK 26    // 编码器CLK引脚

#define ENCODER_DT  27    // 编码器DT引脚  

#define FANSWITCH  32     // 风扇模式按钮

#define TOTALSWITCH  25   // 总开关按钮

#define RGBSWITCH  33     // 灯光模式按钮

#define PIN  14           // RGB灯带数据引脚

#define PWM_Pin  12       // PWM风扇控制引脚

-

安装与烧录

开发环境

安装 Arduino IDE

添加 ESP32 支持:

Arduino IDE: 添加 https://dl.espressif.com/dl/package_esp32_index.json

PlatformIO: 选择 ESP32 平台

依赖库：

Adafruit_NeoPixel - RGB灯带控制

BluetoothSerial - ESP32蓝牙通信

编译烧录：

选择正确的ESP32开发板型号

设置正确的端口和烧录参数

编译并烧录到设备

-

通信协议

数据包格式

温度数据包 (TATZ)

text

TATZ + 温度值(3位)

示例: TATZ025 → 温度=25.0°C

设置数据包 (0921)

text

0921 + 同步开关(1) + 总开关(1) + 风扇模式(1) + 风扇速度(3) + 
风扇曲线(8×3) + 灯光模式(1) + 红色(3) + 绿色(3) + 蓝色(3)

示例: 092110100100100100100100100100100300200100 → 完整设置
状态数据包 (921)

text

921 + 总开关(1) + 风扇模式(1) + 风扇速度(3) + 灯光模式(1)
示例: 921101000 → 总开关开,自动模式,速度100%,RGB循环

配置说明

风扇曲线配置

默认温度-转速对应关系：

cpp

uint8_t fanCurve[8] = {10, 10, 20, 20, 30, 50, 80, 90};
// 对应温度: 55°C,60°C,65°C,70°C,75°C,80°C,85°C,90°C

模式定义

cpp
// 风扇模式: 0=自动, 1=安静, 2=性能, 3=狂暴, 4=关闭
// 灯光模式: 0=RGB循环, 1=RGB流水, 2=温度颜色, 3=单色, 4=关闭
// 总开关: 0=关闭, 1=开启

自定义修改

修改灯光效果

修改NUMPIXELS以适配实际使用的rgb灯珠数量

在 handleLights() 函数中添加新的灯光模式，或修改现有的效果算法。

调整风扇曲线

修改 fanCurve 数组来定义不同温度下的风扇转速。

更改引脚分配

根据实际硬件连接修改顶部的引脚定义。

-

故障排除

常见问题

蓝牙无法连接: 检查ESP32蓝牙功能是否启用

灯光不工作: 检查WS2812B数据线连接和引脚定义

风扇不转: 检查PWM引脚连接和风扇电源

按钮无响应: 检查按钮接线和上拉/下拉电阻配置

-

安全说明

确保散热器有足够的电源供应

避免短路和过载情况

检查连接线是否完好

---

许可证

本项目采用MIT许可证 - 详见 LICENSE 文件。

---

免责声明

本软件按"原样"提供，作者不对使用本软件造成的任何损害负责。使用前请确保了解散热设备的安全操作规范。
